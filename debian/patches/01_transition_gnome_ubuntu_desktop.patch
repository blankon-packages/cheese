# Description: some sessions have been renamed between Natty and Oneiric.
#              Make the transition happens as less intrusive as possible.
=== modified file 'liblightdm-gobject/user.c'
Index: ubuntu/liblightdm-gobject/user.c
===================================================================
--- ubuntu.orig/liblightdm-gobject/user.c	2012-01-18 10:21:41.708528000 +0100
+++ ubuntu/liblightdm-gobject/user.c	2012-01-18 11:03:38.966334779 +0100
@@ -1145,6 +1145,22 @@
 
     priv->layout = g_key_file_get_string (priv->dmrc_file, "Desktop", "Layout", NULL);
     priv->session = g_key_file_get_string (priv->dmrc_file, "Desktop", "Session", NULL);
+
+    if (g_strcmp0 (priv->session, "gnome") == 0)
+    {
+        g_free(priv->session);
+        priv->session = g_strdup ("ubuntu");
+    }
+    else if (g_strcmp0 (priv->session, "unity-2d") == 0)
+    {
+        g_free(priv->session);
+        priv->session = g_strdup ("ubuntu-2d");
+    }
+    else if (g_strcmp0 (priv->session, "gnome-2d") == 0)
+    {
+        g_free(priv->session);
+        priv->session = g_strdup ("gnome-fallback");
+    }
 }
 
 static gchar *
