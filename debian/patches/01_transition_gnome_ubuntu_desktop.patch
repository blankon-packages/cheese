# Description: some sessions have been renamed between Natty and Oneiric.
#              Make the transition happens as less intrusive as possible.
=== modified file 'liblightdm-gobject/user.c'
Index: lightdm/liblightdm-gobject/user.c
===================================================================
--- lightdm.orig/liblightdm-gobject/user.c	2011-10-25 16:59:44.225590000 -0400
+++ lightdm/liblightdm-gobject/user.c	2011-10-25 17:01:22.865046788 -0400
@@ -1118,6 +1118,22 @@
 
     priv->layout = g_key_file_get_string (priv->dmrc_file, "Desktop", "Layout", NULL);
     priv->session = g_key_file_get_string (priv->dmrc_file, "Desktop", "Session", NULL);
+
+    if (g_strcmp0 (priv->session, "gnome") == 0)
+    {
+        g_free(priv->session);
+        priv->session = g_strdup ("ubuntu");
+    }
+    else if (g_strcmp0 (priv->session, "unity-2d") == 0)
+    {
+        g_free(priv->session);
+        priv->session = g_strdup ("ubuntu-2d");
+    }
+    else if (g_strcmp0 (priv->session, "gnome-2d") == 0)
+    {
+        g_free(priv->session);
+        priv->session = g_strdup ("gnome-fallback");
+    }
 }
 
 static gchar *
